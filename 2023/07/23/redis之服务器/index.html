<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>redis之服务器 | mqray&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="redis服务器redis服务器负责与多个客户端建立网络连接，处理客户端请求，在数据库中保存客户端执行命令所产生的数据，并通过资源管理来维持服务器的自身运转。本文将应用侧和源码侧两个角度进行描述。  服务器的功能：redis客户端发送命令后，服务器如何处理； 服务器源码结构中相关重要参数。  redis架构详解单机模式主从模式哨兵模式集群模式慢查询日志redis的慢查询日志功能用于记录执行时间超过">
<meta property="og:type" content="article">
<meta property="og:title" content="redis之服务器">
<meta property="og:url" content="https://mqrayblog.cn/2023/07/23/redis%E4%B9%8B%E6%9C%8D%E5%8A%A1%E5%99%A8/index.html">
<meta property="og:site_name" content="mqray&#39;s blog">
<meta property="og:description" content="redis服务器redis服务器负责与多个客户端建立网络连接，处理客户端请求，在数据库中保存客户端执行命令所产生的数据，并通过资源管理来维持服务器的自身运转。本文将应用侧和源码侧两个角度进行描述。  服务器的功能：redis客户端发送命令后，服务器如何处理； 服务器源码结构中相关重要参数。  redis架构详解单机模式主从模式哨兵模式集群模式慢查询日志redis的慢查询日志功能用于记录执行时间超过">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://mqrayblog.cn/2023/07/23/redis%E4%B9%8B%E6%9C%8D%E5%8A%A1%E5%99%A8/redis%E4%B9%8B%E6%9C%8D%E5%8A%A1%E5%99%A8/slowlog-entry.png">
<meta property="article:published_time" content="2023-07-23T14:44:39.000Z">
<meta property="article:modified_time" content="2023-10-30T16:03:26.337Z">
<meta property="article:author" content="mqray">
<meta property="article:tag" content="redis">
<meta property="article:tag" content="源码阅读">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://mqrayblog.cn/2023/07/23/redis%E4%B9%8B%E6%9C%8D%E5%8A%A1%E5%99%A8/redis%E4%B9%8B%E6%9C%8D%E5%8A%A1%E5%99%A8/slowlog-entry.png">
  
    <link rel="alternate" href="/atom.xml" title="mqray's blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">mqray&#39;s blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://mqrayblog.cn"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-redis之服务器" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/23/redis%E4%B9%8B%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="article-date">
  <time class="dt-published" datetime="2023-07-23T14:44:39.000Z" itemprop="datePublished">2023-07-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/databases/">databases</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      redis之服务器
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="redis服务器"><a href="#redis服务器" class="headerlink" title="redis服务器"></a>redis服务器</h2><p>redis服务器负责与多个客户端建立网络连接，处理客户端请求，在数据库中保存客户端执行命令所产生的数据，并通过资源管理来维持服务器的自身运转。<br>本文将应用侧和源码侧两个角度进行描述。</p>
<ol>
<li>服务器的功能：redis客户端发送命令后，服务器如何处理；</li>
<li>服务器源码结构中相关重要参数。</li>
</ol>
<h3 id="redis架构详解"><a href="#redis架构详解" class="headerlink" title="redis架构详解"></a>redis架构详解</h3><h4 id="单机模式"><a href="#单机模式" class="headerlink" title="单机模式"></a>单机模式</h4><h4 id="主从模式"><a href="#主从模式" class="headerlink" title="主从模式"></a>主从模式</h4><h4 id="哨兵模式"><a href="#哨兵模式" class="headerlink" title="哨兵模式"></a>哨兵模式</h4><h4 id="集群模式"><a href="#集群模式" class="headerlink" title="集群模式"></a>集群模式</h4><h3 id="慢查询日志"><a href="#慢查询日志" class="headerlink" title="慢查询日志"></a>慢查询日志</h3><p>redis的慢查询日志功能用于记录执行时间超过设定时长的命令请求，用户可以通过这个功能那个产生的日志来监控和优化查询。<br>服务器配置中包含如下两个和慢查询有关的参数：</p>
<ol>
<li><code>slowlog-log-slower-than</code>： 执行时长超过多少微秒时，将命令记录到慢查询日志中；如果&#x3D;0，则表示将存储所有执行的日志。</li>
<li><code>slowlog-max-length</code>： 指定服务器能保存多少条慢查询日志。</li>
</ol>
<p>redisServer属性众多，现在来看下和慢查询相关的属性：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">redisServer</span> &#123;</span></span><br><span class="line">    <span class="built_in">list</span> *slowlog;                  <span class="comment">/* SLOWLOG list of commands */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> slowlog_entry_id;     <span class="comment">/* SLOWLOG current entry ID */</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> slowlog_log_slower_than; <span class="comment">/* SLOWLOG time limit (to get logged) */</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> slowlog_max_len;     <span class="comment">/* SLOWLOG max number of items logged */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中，<br><code>slowlog_entry_id</code>表示当前慢查询的日志id。其初始值为0，当创建一条新的慢查询日志时，这个属性就会用作新日志的id，而后自增+1用作下一条日志的id。<br><code>slowlog</code>则保存了所有慢查询日志的链表，每次新增一个慢查询日志时，都会将新的放在链表头部，并且移除最早加入慢查询日志的entry。<br><code>slowlog_log_slower_than</code>即上述命令执行的标定时间，<br><code>slowlog-max-len</code>用以限制慢查询日志链表长度。</p>
<p>链表中的节点为<code>slowlogEntry</code>，其定义如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">slowlogEntry</span> &#123;</span></span><br><span class="line">    robj **argv; <span class="comment">// 节点命令的详细内容</span></span><br><span class="line">    <span class="type">int</span> argc; <span class="comment">// 参数个数</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> id;      <span class="comment">// 链表节点的唯一标识符</span></span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> duration; <span class="comment">// 节点命令的执行时长，单位微秒</span></span><br><span class="line">    <span class="type">time_t</span> time;        <span class="comment">// 节点命令执行的unix时间</span></span><br><span class="line">    sds cname;          <span class="comment">// 节点命令的发起客户端</span></span><br><span class="line">    sds peerid;         <span class="comment">// 命令发起的客户端的网络地址</span></span><br><span class="line">&#125; slowlogEntry;</span><br></pre></td></tr></table></figure>

<p>如下是慢查询日志链表节点的示意图：<br><img src="./redis之服务器/slowlog-entry.png"></p>
<p>在客户端可以使用<code>slowlog get</code>命令查看服务器保存的慢查询日志。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">123.122.228.34:6379&gt; slowlog get </span><br><span class="line"> 1) 1) (integer) 10</span><br><span class="line">    2) (integer) 1690086551</span><br><span class="line">    3) (integer) 66497</span><br><span class="line">    4) 1) &quot;geodist&quot;</span><br><span class="line">       2) &quot;citys&quot;</span><br><span class="line">       3) &quot;beijing&quot;</span><br><span class="line">       4) &quot;shanghai&quot;</span><br><span class="line">       5) &quot;km&quot;</span><br><span class="line">    5) &quot;123.122.42.170:44244&quot;</span><br><span class="line">    6) &quot;&quot;</span><br><span class="line"> 2) 1) (integer) 9</span><br><span class="line">    2) (integer) 1690049869</span><br><span class="line">    3) (integer) 10520</span><br><span class="line">    4) 1) &quot;INFO&quot;</span><br><span class="line">    5) &quot;123.122.42.134:54780&quot;</span><br><span class="line">    6) &quot;lettuce#ClusterTopologyRefresh&quot;</span><br><span class="line"> 3) 1) (integer) 8</span><br><span class="line">    2) (integer) 1690012734</span><br><span class="line">    3) (integer) 10706</span><br><span class="line">    4) 1) &quot;PING&quot;</span><br><span class="line">    5) &quot;123.122.228.37:43154&quot;</span><br><span class="line">    6) &quot;&quot;</span><br><span class="line"> 4) 1) (integer) 7</span><br><span class="line">    2) (integer) 1689999931</span><br><span class="line">    3) (integer) 11551</span><br><span class="line">    4) 1) &quot;PING&quot;</span><br><span class="line">    5) &quot;123.122.228.37:42252&quot;</span><br><span class="line">    6) &quot;&quot;</span><br></pre></td></tr></table></figure>

<h4 id="初始化慢查询日志"><a href="#初始化慢查询日志" class="headerlink" title="初始化慢查询日志"></a>初始化慢查询日志</h4><p>服务器启动时，将会执行慢查询的初始化。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">slowlogInit</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    server.slowlog = listCreate();</span><br><span class="line">    server.slowlog_entry_id = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 释放慢查询列表中的元素，及相关内存空间</span></span><br><span class="line">    listSetFreeMethod(server.slowlog,slowlogFreeEntry);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">slowlogFreeEntry</span><span class="params">(<span class="type">void</span> *septr)</span> &#123;</span><br><span class="line">    slowlogEntry *se = septr;</span><br><span class="line">    <span class="type">int</span> j;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; se-&gt;argc; j++)</span><br><span class="line">        <span class="comment">// 将slowentry中保存的所有查询参数的引用计数值-1</span></span><br><span class="line">        decrRefCount(se-&gt;argv[j]);</span><br><span class="line">    <span class="comment">// 释放查询参数的指针数组空间</span></span><br><span class="line">    zfree(se-&gt;argv);</span><br><span class="line">    sdsfree(se-&gt;peerid);</span><br><span class="line">    sdsfree(se-&gt;cname);</span><br><span class="line">    <span class="comment">// 释放slowentry自身的空间</span></span><br><span class="line">    zfree(se);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="添加慢查询日志"><a href="#添加慢查询日志" class="headerlink" title="添加慢查询日志"></a>添加慢查询日志</h4><p>前面讲述过慢查询日志产生的条件，下面来看一下其源码实现：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">slowlogPushEntryIfNeeded</span><span class="params">(client *c, robj **argv, <span class="type">int</span> argc, <span class="type">long</span> <span class="type">long</span> duration)</span> &#123;</span><br><span class="line">    <span class="comment">// 判断是否开启了慢查询日志</span></span><br><span class="line">    <span class="keyword">if</span> (server.slowlog_log_slower_than &lt; <span class="number">0</span>) <span class="keyword">return</span>; </span><br><span class="line">    <span class="comment">// 如果 该命令耗时大于设定值，则創建一个slowlogentry，并将其加入慢查询日志链表头部</span></span><br><span class="line">    <span class="keyword">if</span> (duration &gt;= server.slowlog_log_slower_than)</span><br><span class="line">        listAddNodeHead(server.slowlog,</span><br><span class="line">                        slowlogCreateEntry(c,argv,argc,duration));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断加入后的链表长度，如果超出链表长度的最大值，则删除最新入链的元素</span></span><br><span class="line">    <span class="keyword">while</span> (listLength(server.slowlog) &gt; server.slowlog_max_len)</span><br><span class="line">        listDelNode(server.slowlog,listLast(server.slowlog));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">slowlogEntry *<span class="title function_">slowlogCreateEntry</span><span class="params">(client *c, robj **argv, <span class="type">int</span> argc, <span class="type">long</span> <span class="type">long</span> duration)</span> &#123;</span><br><span class="line">    slowlogEntry *se = zmalloc(<span class="keyword">sizeof</span>(*se));</span><br><span class="line">    <span class="type">int</span> j, slargc = argc;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (slargc &gt; SLOWLOG_ENTRY_MAX_ARGC) slargc = SLOWLOG_ENTRY_MAX_ARGC;</span><br><span class="line">    se-&gt;argc = slargc;</span><br><span class="line">    se-&gt;argv = zmalloc(<span class="keyword">sizeof</span>(robj*)*slargc);</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; slargc; j++) &#123;</span><br><span class="line">        <span class="comment">// 判断命令参数是否超出额定值，因为命令参数过多对于服务器而言是无效的内存开销</span></span><br><span class="line">        <span class="keyword">if</span> (slargc != argc &amp;&amp; j == slargc<span class="number">-1</span>) &#123;</span><br><span class="line">            se-&gt;argv[j] = createObject(OBJ_STRING,</span><br><span class="line">                sdscatprintf(sdsempty(),<span class="string">&quot;... (%d more arguments)&quot;</span>,</span><br><span class="line">                argc-slargc+<span class="number">1</span>));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// 如果 命令参数中 字符串参数过长，则new一个额定长度的字符串</span></span><br><span class="line">            <span class="keyword">if</span> (argv[j]-&gt;type == OBJ_STRING &amp;&amp;</span><br><span class="line">                sdsEncodedObject(argv[j]) &amp;&amp;</span><br><span class="line">                sdslen(argv[j]-&gt;ptr) &gt; SLOWLOG_ENTRY_MAX_STRING)</span><br><span class="line">            &#123;</span><br><span class="line">                sds s = sdsnewlen(argv[j]-&gt;ptr, SLOWLOG_ENTRY_MAX_STRING);</span><br><span class="line"></span><br><span class="line">                s = sdscatprintf(s,<span class="string">&quot;... (%lu more bytes)&quot;</span>,</span><br><span class="line">                    (<span class="type">unsigned</span> <span class="type">long</span>)</span><br><span class="line">                    sdslen(argv[j]-&gt;ptr) - SLOWLOG_ENTRY_MAX_STRING);</span><br><span class="line">                se-&gt;argv[j] = createObject(OBJ_STRING,s);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (argv[j]-&gt;refcount == OBJ_SHARED_REFCOUNT) &#123;</span><br><span class="line">                se-&gt;argv[j] = argv[j];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">/* Here we need to duplicate the string objects composing the</span></span><br><span class="line"><span class="comment">                 * argument vector of the command, because those may otherwise</span></span><br><span class="line"><span class="comment">                 * end shared with string objects stored into keys. Having</span></span><br><span class="line"><span class="comment">                 * shared objects between any part of Redis, and the data</span></span><br><span class="line"><span class="comment">                 * structure holding the data, is a problem: FLUSHALL ASYNC</span></span><br><span class="line"><span class="comment">                 * may release the shared string object and create a race. */</span></span><br><span class="line">                se-&gt;argv[j] = dupStringObject(argv[j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 设置命令的执行时间</span></span><br><span class="line">    se-&gt;time = time(<span class="literal">NULL</span>);</span><br><span class="line">    <span class="comment">// 设置发生时间</span></span><br><span class="line">    se-&gt;duration = duration;</span><br><span class="line">    se-&gt;id = server.slowlog_entry_id++;</span><br><span class="line">    se-&gt;peerid = sdsnew(getClientPeerId(c));</span><br><span class="line">    se-&gt;cname = c-&gt;name ? sdsnew(c-&gt;name-&gt;ptr) : sdsempty();</span><br><span class="line">    <span class="keyword">return</span> se;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="删除慢查询日志"><a href="#删除慢查询日志" class="headerlink" title="删除慢查询日志"></a>删除慢查询日志</h4><p>遍历服务器的慢查询日志，如果存在，则逐条删除。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">slowlogReset</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">while</span> (listLength(server.slowlog) &gt; <span class="number">0</span>)</span><br><span class="line">        listDelNode(server.slowlog,listLast(server.slowlog));</span><br></pre></td></tr></table></figure>
<p><code>listDelNode</code>方法定义在<code>src/adlist.c</code>中。</p>
<h3 id="持久化"><a href="#持久化" class="headerlink" title="持久化"></a>持久化</h3><p>redis提供了两种持久化方式，对应的服务器配置如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p><a target="_blank" rel="noopener" href="https://github.com/redis/redis/blob/unstable/src/slowlog.c#L137">1. redis slowlog.c</a><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/mrhelloworld/p/redis-architecture.html">2. redis架构</a>  </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://mqrayblog.cn/2023/07/23/redis%E4%B9%8B%E6%9C%8D%E5%8A%A1%E5%99%A8/" data-id="clod3av7l0013miq12b5gceh4" data-title="redis之服务器" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/redis/" rel="tag">redis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/" rel="tag">源码阅读</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2023/07/24/redis%E4%B9%8B%E6%8C%81%E4%B9%85%E5%8C%96/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          redis之持久化
        
      </div>
    </a>
  
  
    <a href="/2023/07/21/redis%E4%B9%8B%E7%89%B9%E6%AE%8A%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">redis之特殊数据类型</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/coding/">coding</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/databases/">databases</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/" rel="tag">spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sth/" rel="tag">sth</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8E%92%E9%9A%9C/" rel="tag">排障</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/" rel="tag">源码阅读</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/java/" style="font-size: 18px;">java</a> <a href="/tags/linux/" style="font-size: 12px;">linux</a> <a href="/tags/redis/" style="font-size: 20px;">redis</a> <a href="/tags/spring/" style="font-size: 14px;">spring</a> <a href="/tags/sth/" style="font-size: 12px;">sth</a> <a href="/tags/%E6%8E%92%E9%9A%9C/" style="font-size: 10px;">排障</a> <a href="/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/" style="font-size: 16px;">源码阅读</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">八月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">七月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/10/31/spring%E4%B9%8Bioc/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/10/31/%E5%BB%BA%E7%AB%99/">github + hexo建站[待补充]</a>
          </li>
        
          <li>
            <a href="/2023/10/17/springboot%E6%BA%90%E7%A0%81%E4%B9%8B%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B3/">springboot源码之启动流程3</a>
          </li>
        
          <li>
            <a href="/2023/10/12/springboot%E6%BA%90%E7%A0%81%E4%B9%8B%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B2/">springboot源码之启动流程2</a>
          </li>
        
          <li>
            <a href="/2023/10/10/springboot%E6%BA%90%E7%A0%81%E4%B9%8B%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B1/">springboot源码之启动流程1</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 mqray<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>